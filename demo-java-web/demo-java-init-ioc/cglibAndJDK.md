# 动态代理是什么？
- 动态代理是一种用于扩展对象功能的技术。它可以在运行时为一个对象创建代理,并通过代理对象对方法进行增强。
JDK 动态代理:
1. 必须是接口,通过InvokeHandler来处理代理实例中方法调用。
2. 使用Proxy类来创建代理对象。
3. 只能对实现了接口的类生成代理,不能针对类。

CGLIB 动态代理:
1. 通过自定继承的方式实现,其原理是通过<span style="color:yellow">字节码技术</span>动态生成被代理类的子类。(不能对声明为final的方法进行代理)
2. 使用Enhancer类来创建代理对象。
3. 可以对未实现接口的类生成代理。

# JDK动态代理 VS CGLIB动态代理
- JDK动态代理是通过接口来进行强制转换的。（InvokerHandler） VS CGLIB动态代理是通过生成一个被代理对象的子类，然后重写父类的方法来进行方法拦截。（MethodInterceptor）
- JDK动态代理生成的代理类，是和目标类实现同样的接口，CGLIB动态代理生成的代理类，是目标类的子类。
- JDK动态代理和CGLIB动态代理都是在运行期生成字节码，JDK动态代理直接写Class字节码，CGLIB动态代理使用ASM框架写Class字节码，CGLIB动态代理实现更复杂，生成代理类比JDK动态代理效率低。
- JDK动态代理调用代理方法，是通过反射机制调用，CGLIB动态代理是通过FastClass机制直接调用方法，CGLIB动态代理执行效率更高。
- JDK动态代理实现代理有一个限制，就是使用动态代理的对象必须实现一个或多个接口（JDK动态代理生成的代理类是目标类的接口的实现），如果想代理没有实现接口的类，就可以使用CGLIB动态代理。
- JDK动态代理生成的代理对象，不需要第三方的类库依赖，CGLIB动态代理生成的代理对象，需要依赖CGLIB的类库。
- JDK动态代理在实现代理的时候，只需要使用newProxyInstance方法，同时需要提供一个实现InvocationHandler接口的类，CGLIB动态代理在实现代理的时候，需要使用Enhancer类，并且要求目标对象没有实现final方法。


